<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情绪词汇二维坐标可视化</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="./assets/css/index.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>情绪词汇二维坐标可视化</h1>
            <p class="subtitle">基于"愉悦度-唤醒度"模型的情绪词汇分布图。横轴表示愉悦度(负值:不愉悦, 正值:愉悦)，纵轴表示唤醒度(负值:平静/低落, 正值:激动/兴奋)。</p>
        </header>
        
        <!-- 加载状态指示器 -->
        <div id="loadingIndicator" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #4a6fa5; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
            <h3 style="color: #333; margin: 0 0 10px 0;">正在加载数据...</h3>
            <p style="color: #666; margin: 0;">请稍候，正在从外部JSON文件获取情绪数据</p>
        </div>
        
        <!-- 错误消息显示 -->
        <div id="errorMessage" style="display: none; position: fixed; top: 20px; right: 20px; max-width: 400px; background: #ff4757; color: white; padding: 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 1000; font-size: 14px; line-height: 1.4;">
            <strong>错误：</strong><span id="errorText"></span>
            <button onclick="this.parentElement.style.display='none'" style="background: none; border: none; color: white; float: right; font-size: 18px; cursor: pointer; padding: 0;">×</button>
        </div>
        
        <div class="main-content">
            <div class="visualization-section">
                <h2 class="section-title">情绪坐标分布图</h2>
                <div id="dataStats" style="background: #f8f9fa; padding: 10px; border-radius: 6px; margin-bottom: 15px; font-size: 14px; color: #666;"></div>
                <div class="chart-container" id="chart"></div>
                
                <div class="instructions">
                    <h3>使用说明：</h3>
                    <ul>
                        <li>将鼠标悬停在圆点上可查看情绪词汇详情</li>
                        <li>点击右侧的类别按钮可筛选特定情绪类别</li>
                        <li>使用强度筛选器可查看不同强度的情绪词汇</li>
                        <li>坐标系分为四个象限：右上(高愉悦/高唤醒)、右下(高愉悦/低唤醒)、左下(低愉悦/低唤醒)、左上(低愉悦/高唤醒)</li>
                    </ul>
                </div>
            </div>
            
            <div class="controls-section">
                <div class="controls">
                    <h2 class="section-title">筛选控制</h2>
                    
                    <div class="control-group">
                        <label>情绪类别：</label>
                        <div class="category-filter" id="categoryFilter"></div>
                    </div>
                    
                    <div class="control-group">
                        <label>情绪强度：</label>
                        <div class="level-filter">
                            <button class="level-btn active" data-level="all">全部</button>
                            <button class="level-btn" data-level="轻微 (Mild)">轻微</button>
                            <button class="level-btn" data-level="中等 (Medium)">中等</button>
                            <button class="level-btn" data-level="强烈 (Strong)">强烈</button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>显示图例：</label>
                        <div class="legend" id="legend"></div>
                    </div>
                </div>
                
                <div class="controls">
                    <h2 class="section-title">数据点信息</h2>
                    <p>当前选中：<span id="selectedPoint">无</span></p>
                    <p>总计点数：<span id="totalPoints">0</span></p>
                    <p>当前显示：<span id="visiblePoints">0</span></p>
                    <button id="retryButton" onclick="retryLoadData()" style="margin-top: 10px; padding: 8px 16px; background: #4a6fa5; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.3s;">重新加载数据</button>
                </div>
                
                <div class="controls">
                    <h2 class="section-title">坐标范围</h2>
                    <p>愉悦度(X轴)：-1.0 ~ 1.0</p>
                    <p>唤醒度(Y轴)：-1.0 ~ 1.0</p>
                    <p>坐标系中心为(0, 0)</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>情绪数据基于"效价-唤醒模型"分析生成 | 数据可视化工具 | 共包含11个情绪类别，3个强度等级，超过150个情绪词汇</p>
        </footer>
    </div>
    <script src="./assets/js/main.js"></script>
</body>
</html>